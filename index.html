<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Rock Paper Scissors - Java Web</title>
    <script src="https://cjrtnc.leaningtech.com/3.0/loader.js"></script>
</head>
<body style="margin:0; background-color: #000; color: white; display: flex; flex-direction: column; justify-content: center; align-items: center; height: 100vh; font-family: sans-serif;">
    
    <div id="status_msg" style="margin-bottom: 20px; font-size: 1.2rem; text-align: center;">
        Connecting to Java Engine...
    </div>
    
    <div id="container"></div>

    <script>
        async function startEngine() {
            const msg = document.getElementById("status_msg");

            // ১. লোডার চেক করা
            if (typeof cheerpjInit === 'undefined') {
                msg.innerHTML = "Still connecting to engine... <br><small>Please check your internet or disable AdBlocker.</small>";
                setTimeout(startEngine, 2000); 
                return;
            }

            try {
                msg.innerHTML = "Initializing Java Environment...";
                await cheerpjInit();
                
                msg.innerHTML = "Downloading RockPaperScissors.jar (34MB)... <br>This may take a minute.";
                
                const container = document.getElementById("container");
                cheerpjCreateDisplay(800, 600, container); 
                
                // ২. সরাসরি ফাইলের নাম ব্যবহার (যেহেতু ফাইল রুটে আছে)
                await cheerpjRunJar("RockPaperScissors.jar");
                
                // গেম শুরু হলে মেসেজ মুছে যাবে
                msg.style.display = "none";

            } catch (err) {
                console.error("Error:", err);
                msg.innerHTML = "Failed to load game. Error: " + err.message;
            }
        }

        window.onload = startEngine;
    </script>
</body>
</html>
