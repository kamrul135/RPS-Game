<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Rock Paper Scissors - Java Web</title>
    <script src="https://cjrtnc.leaningtech.com/3.0/loader.js">await cheerpjRunJar("RockPaperScissors.jar");</script>
</head>
<body style="margin:0; background-color: #000; color: white; display: flex; flex-direction: column; justify-content: center; align-items: center; height: 100vh; font-family: sans-serif;">
    
    <div id="status_msg" style="margin-bottom: 20px; font-size: 1.2rem;">Connecting to Java Engine...</div>
    <div id="container"></div>

    <script>
        async function startEngine() {
            // ১. চেক করা লোডারটি তৈরি হয়েছে কি না
            if (typeof cheerpjInit === 'undefined') {
                console.log("CheerpJ not ready yet, retrying in 1s...");
                setTimeout(startEngine, 1000); // ১ সেকেন্ড পর আবার চেষ্টা করবে
                return;
            }

            try {
                document.getElementById("status_msg").innerHTML = "Initializing Java Runtime...";
                await cheerpjInit();
                
                document.getElementById("status_msg").innerHTML = "Downloading Game Files (34MB)... Please wait 1-2 minutes.";
                
                const container = document.getElementById("container");
                cheerpjCreateDisplay(800, 600, container); 
                
                // ২. JAR ফাইলটি রান করা (ফাইলের নাম আপনার image_61393b.png অনুযায়ী সঠিক আছে)
                await cheerpjRunJar("/RockPaperScissors.jar");
                
                // গেম শুরু হলে মেসেজটি সরিয়ে ফেলা
                document.getElementById("status_msg").style.display = "none";

            } catch (err) {
                console.error("Critical Error:", err);
                document.getElementById("status_msg").innerHTML = "Error: " + err.message;
            }
        }

        // পেজ লোড হলে ইঞ্জিন শুরু করা
        window.onload = startEngine;
    </script>
</body>
</html>
